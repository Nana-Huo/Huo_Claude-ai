<!--pages/orders/orders.wxml-->
<view class="container">
  <!-- æ ‡ç­¾æ  -->
  <view class="tab-bar">
    <scroll-view class="tab-scroll" scroll-x="true">
      <view class="tab-list">
        <view wx:for="{{tabs}}" wx:key="id" 
              class="tab-item {{activeTab === item.id ? 'tab-active' : ''}}"
              data-tab="{{item.id}}"
              bindtap="onTabChange">
          <text class="tab-text">{{item.name}}</text>
          <text class="tab-count" wx:if="{{item.count > 0}}">{{item.count}}</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- è®¢å•åˆ—è¡¨ -->
  <view class="orders-section">
    <view wx:if="{{filteredOrders.length > 0}}" class="orders-list">
      <view wx:for="{{filteredOrders}}" wx:key="id" 
            class="order-item"
            data-id="{{item.id}}"
            bindtap="onOrderTap">
        
        <!-- è®¢å•å¤´éƒ¨ -->
        <view class="order-header">
          <text class="order-id">è®¢å•å·ï¼š{{item.id}}</text>
          <view class="status-badge {{getStatusClass(item.status)}}">
            <text>{{getStatusText(item.status)}}</text>
          </view>
        </view>

        <!-- è®¢å•å†…å®¹ -->
        <view class="order-content">
          <view class="service-info">
            <text class="service-name">{{item.serviceName}}</text>
            <text class="artist-name">{{item.artistName}}</text>
          </view>
          
          <view class="order-details">
            <view class="detail-item">
              <text class="detail-label">æœåŠ¡æ—¶é—´ï¼š</text>
              <text class="detail-value">{{item.date}} {{item.time}}</text>
            </view>
            <view class="detail-item">
              <text class="detail-label">ç”²å‹ï¼š</text>
              <text class="detail-value">{{item.nailShape}}</text>
            </view>
            <view class="detail-item">
              <text class="detail-label">è”ç³»æ–¹å¼ï¼š</text>
              <text class="detail-value">{{item.phone}}</text>
            </view>
          </view>
        </view>

        <!-- è®¢å•åº•éƒ¨ -->
        <view class="order-footer">
          <text class="order-price">Â¥{{item.price}}</text>
          <view class="order-actions">
            <view wx:if="{{item.status === 'pending'}}" class="action-buttons">
              <button class="action-btn btn-cancel" 
                      data-id="{{item.id}}"
                      catchtap="onCancelOrder">å–æ¶ˆé¢„çº¦</button>
              <button class="action-btn btn-confirm" 
                      data-id="{{item.id}}"
                      catchtap="onConfirmOrder">ç¡®è®¤åˆ°åº—</button>
            </view>
            <view wx:elif="{{item.status === 'completed'}}" class="action-buttons">
              <button class="action-btn btn-rebook" 
                      data-order="{{item}}"
                      catchtap="onReBook">å†æ¬¡é¢„çº¦</button>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:else class="empty-state">
      <view class="empty-icon">ğŸ“‹</view>
      <text class="empty-title">æš‚æ— è®¢å•</text>
      <text class="empty-subtitle">å¿«å»é¢„çº¦ä¸€ä¸ªç¾ç¾çš„æŒ‡ç”²å§ï¼</text>
      <button class="empty-action" bindtap="goToBooking">ç«‹å³é¢„çº¦</button>
    </view>
  </view>
</view>