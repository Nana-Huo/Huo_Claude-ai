<!--pages/user/user.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="user-info-section">
    <view class="user-card">
      <!-- ç™»å½•çŠ¶æ€ -->
      <view wx:if="{{!isLoggedIn}}" class="login-section" bindtap="login">
        <view class="login-avatar">
          <text class="avatar-icon">ğŸ‘¤</text>
        </view>
        <view class="login-info">
          <text class="login-title">ç‚¹å‡»ç™»å½•</text>
          <text class="login-subtitle">ç™»å½•åå¯äº«å—æ›´å¤šæœåŠ¡</text>
        </view>
        <view class="login-arrow">â€º</view>
      </view>

      <!-- å·²ç™»å½•çŠ¶æ€ -->
      <view wx:else class="user-section">
        <view class="user-profile" bindtap="editProfile">
          <view class="user-avatar">
            <image src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
          </view>
          <view class="user-details">
            <text class="user-name">{{userInfo.nickName || 'ç¾ç”²çˆ±å¥½è€…'}}</text>
            <view class="user-level">
              <text class="level-tag">æ™®é€šä¼šå‘˜</text>
              <text class="level-points">{{userStats.points}}ç§¯åˆ†</text>
            </view>
          </view>
          <view class="profile-arrow">â€º</view>
        </view>

        <!-- ç”¨æˆ·ç»Ÿè®¡ -->
        <view class="user-stats">
          <view class="stat-item" bindtap="goToBookings">
            <text class="stat-number">{{userStats.totalBookings}}</text>
            <text class="stat-label">æ€»é¢„çº¦</text>
          </view>
          <view class="stat-divider"></view>
          <view class="stat-item" bindtap="goToBookings">
            <text class="stat-number">{{userStats.completedBookings}}</text>
            <text class="stat-label">å·²å®Œæˆ</text>
          </view>
          <view class="stat-divider"></view>
          <view class="stat-item" bindtap="goToBookings">
            <text class="stat-number">{{userStats.cancelledBookings}}</text>
            <text class="stat-label">å·²å–æ¶ˆ</text>
          </view>
          <view class="stat-divider"></view>
          <view class="stat-item" bindtap="viewPointsDetail">
            <text class="stat-number">{{userStats.points}}</text>
            <text class="stat-label">ç§¯åˆ†</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å¿«é€Ÿæ“ä½œ -->
  <view class="quick-actions-section" wx:if="{{isLoggedIn}}">
    <view class="quick-actions">
      <view wx:for="{{quickActions}}" wx:key="id" 
            class="quick-action-item" 
            data-action="{{item.action}}" 
            bindtap="onQuickActionTap">
        <text class="action-icon">{{item.icon}}</text>
        <text class="action-title">{{item.title}}</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="menu-list">
      <view wx:for="{{menuItems}}" wx:key="id" 
            class="menu-item" 
            data-action="{{item.action}}" 
            bindtap="onMenuItemTap">
        <view class="menu-left">
          <text class="menu-icon">{{item.icon}}</text>
          <view class="menu-content">
            <text class="menu-title">{{item.title}}</text>
            <text class="menu-desc">{{item.description}}</text>
          </view>
        </view>
        <view class="menu-arrow">â€º</view>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section" wx:if="{{isLoggedIn}}">
    <button class="logout-btn" bindtap="logout">é€€å‡ºç™»å½•</button>
  </view>

  <!-- åº•éƒ¨é—´è· -->
  <view class="bottom-spacing"></view>
</view>

<!-- åˆ†äº«æŒ‰é’® -->
<button class="share-btn" open-type="share" bindtap="share">
  <text>åˆ†äº«å°ç¨‹åº</text>
</button>